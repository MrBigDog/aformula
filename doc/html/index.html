<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>aformula: AFormula</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">aformula
   &#160;<span id="projectnumber">0.9.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AFormula </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Charles Pence </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 19, 2011</dd></dl>
<p>Welcome to the documentation for AFormula!</p>
<p>AFormula is a library designed for high-performance evaluation of mathematical formulas, especially in numerical simulation and similar applications. It is heavily inspired by muParser, but is able to utilize multiple different formula-evaluation backends, including muParser itself, and the LLVM and libjit just-in-time compilers. Just-in-time compilation permits much faster formula evaluation, and the LLVM library, in particular, has been ported to many CPU architectures.</p>
<p>Support is included for all the standard arithmetic and comparative operators, including <code>&lt;=</code>, <code>&gt;=</code>, <code>!=</code>, <code>==</code>, <code>&lt;</code>, <code>&gt;</code>, <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, and <code>^</code> (exponentiation). Arbitrary variables may be defined (as pointers to double-values), and the assignment operator, <code>=</code>, may be used to assign values to them. A full suite of builtin functions is supported:</p>
<ul>
<li>Trigonometry (sin, cos, tan, asin, acos, atan, atan2) </li>
<li>Hyperbolic trigonometry (sinh, cosh, tanh, asinh, acosh, atanh) </li>
<li>Logarithms (log2, log10 [= log], ln, exp, sqrt) </li>
<li>Miscellaneous (sign, rint, abs) </li>
<li>Logical control: if(x,if-true,if-false)</li>
</ul>
<p>Finally, the constants <code>pi</code> and <code>e</code> are supported.</p>
<p>The order of operations is:</p>
<ul>
<li>= (assignment, lowest) </li>
<li>&lt;=, &gt;=, !=, ==, &lt;, &gt; (comparisons) </li>
<li>+, - (addition/subtraction) </li>
<li>*, / (multiplication/division) </li>
<li>^ (exponentiation)</li>
</ul>
<p>AFormula is designed to be quite robust to invalid formulas, and is careful to return appropriate errors when necessary.</p>
<p>There are two JIT backends which AFormula can use in order to compile functions on the fly: LLVM and libjit. In general, both should provide roughly the same performance, though there is a performance test included which will benchmark the library and permit selection at runtime.</p>
<h1><a class="anchor" id="Performance"></a>
Performance</h1>
<p>AFormula provides very high performance, even in many cases surpassing what can be achieved by precompiled, native C++ code. Here are the results of a sample, representative benchmark:</p>
<pre class="fragment">Backend benchmark:

Backend 1 (muParser): 0.417541 seconds (417541 ticks)
Backend 2 (LLVM): 0.233151 seconds (233151 ticks)
Backend 3 (libjit): 0.232719 seconds (232719 ticks)
Compiled C++ (comparison): 0.235764 seconds (235764 ticks)
</pre><p>Note that both the JIT compilers, LLVM and libjit, perform about twice as fast as the byte-compiled muParser code, and both JIT compilers even perform 2-3% faster than the native, precompiled C++ version (g++ -O3) of the same code. Which of LLVM or libjit performs faster in a given scenario, for simple formulas, is usually a matter of chance.</p>
<h1><a class="anchor" id="Requirements"></a>
Requirements</h1>
<p>The Boost C++ Libraries <a href="http://www.boost.org">http://www.boost.org</a> are required to build AFormula.</p>
<p>If you want either of the dynamic-compilation backends to be built, you will need to install either LLVM <a href="http://www.llvm.org">http://www.llvm.org</a>, or libjit <a href="http://freshmeat.net/projects/libjit/">http://freshmeat.net/projects/libjit/</a>. Note that at the time of this writing I was not able to get libjit to compile without a fair bit of hacking around on its source code.</p>
<p>Neither of these libraries are necessary (the included muParser backend will be built regardless), but they will provide a large speed boost.</p>
<h1><a class="anchor" id="Thanks"></a>
Thanks</h1>
<p>Thanks are most obviously due to the author of muParser, Ingo Berg. Without muParser having been written, I never would have been able to start on the project that produced the need for AFormula. muParser, which is licensed under the MIT license, is Copyright (C) 2004-2006 Ingo Berg.</p>
<p>Also, thanks is due to the pair of massively cross-platform JIT compilation libraries, LLVM and libjit, without which a JIT-compilation backend would be impossible</p>
<h1><a class="anchor" id="Interface"></a>
Interface</h1>
<p>The main class exported by AFormula is <code>AFormula::Formula</code>. See its documentation for more information. </p>
</div></div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated by&nbsp;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14</small></address>
</body>
</html>
